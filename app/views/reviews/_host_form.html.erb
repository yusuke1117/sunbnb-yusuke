<button type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModal_<%= reservation.id %>">
    Review Guest
</button>

<div class="modal" id="myModal_<%= reservation.id %>">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h4 class="modal-title text-left">Review Guest</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <div class="modal-body">
                <%= form_for current_user.host_reviews.new do |f| %>
                    <div class="form-group text-center">
                        <div id="stars"></div>
                    </div>
                    <div class="form-group">
                        <%= f.text_area :comment, row: 3, class: "form-control" %>
                    </div>

                    <%= f.hidden_field :room_id, value: reservation.room.id %>
                    <%= f.hidden_field :reservation_id, value: reservation.id %>
                    <%= f.hidden_field :guest_id, value: reservation.user.id %>

                    <div class="text-center">
                        <%= f.submit "Add Review", class: "btn btn-normal" %>
                    </div>
                    <script>
                        $('#stars').raty({
                            path: '/assets',
                            scoreName: 'host_review[star]',
                            score: 1
                        });
                    </script>
                <% end %>
            </div>
        </div>
    </div>
</div> 